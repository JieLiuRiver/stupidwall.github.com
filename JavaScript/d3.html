<div class="container" >
	<div class="row">
		<div class="col-md-12">
			<pre style="margin-bottom: 10px; background: hsl(30, 20%, 25%); " >
			<code class="language-css" style="color:#fff; font-size:15px; text-shadow: none;">

			 /*===============================================*/
			 /*   d3使用
			 /*===============================================*/
				/**
				 * d3:  一句话： 你给我数据，我还你通俗易懂的绚丽的图形。
				 */

				/**
				 * 例子01：
				 * 		操作dom， 改变属性，添加内容，类似jquery

					var oSpan_01 = d3.select("body").selectAll("#text_01").text("www.ourd3js.com");
					oSpan_01.style("color","red");
					oSpan_01.style("font-size","30px");
					oSpan_01.remove();  //删除
				 */

				/**
				 * 例子02：
				 * 		如何使用数据

					 var set = ["I like dog","I like cat","I like snake"];
					 var oSpan_01 = d3.select("body").selectAll(".text_01")
					 oSpan_01.data(set)             //使用数据集合
						.text(function(d,i){
							return d;
						});
				 */


				/**
				 *例子03:
				 *		柱形图
				 *
				 * 		var width = 600;
						var height = 600;
						var svg = d3.select("body").append("svg")
									   .attr("width",width)
									   .attr("height",height);

						var dataset = [ 30 , 20 , 45 , 12 , 21 ];

						svg.selectAll("rect")
						   .data(dataset)
						   .enter()
						   .append("rect")				// append 元素 rect
						   .attr("x",10)
						   .attr("y",function(d,i){
								return i * 30;
						   })
						   .attr("width",function(d,i){
								return d * 10;
						   })
						   .attr("height",28)
						   .attr("fill","red");

						   注释：
						   react: 	表示在 svg 中选择所有的 rect 元素，但是实际上这时候 svg 中还不存在 rect 元素。这是 D3 一个比较特殊的地方，即它能够选择一个空集
						   enter ： 表示当所需要的元素（这里为 rect ）比绑定的数据集合的元素（这里为 dataset ）少时，自动添加位置，使得与数据集合的数量一样多。这里很重要

						   *** 上面的柱形图，对于每个柱柱都是手动设定的长度，实际运用中我们常常希望给定一个最大值，让柱柱自动根据这个最大值调整百分比，显示出来

						   var wx = d3.scale.linear()
								.domain([0,d3.max(dataset)])
								.range([0,500]);
						   改为：  .attr("width",wx)
				 *
				 */


				/**
				 * 例子04
				 * 		如何使用scale比例
				 *
				 * 		var dataset = [ 30, 20 , 52 , 2 , 11 ];
						var result = d3.max( dataset );


						var dataset = [ [ 30 , 20 ] ,
										[ 52 , 2 ] ,
										[ 90 , 11 ] ];
						var result = d3.max( dataset , function(d){
							 return d[0];
						} );
						=> 返回的值为90


						var scale = d3.scale.linear();  //意味着，使用线性比例类型函数
						scale.domain([0,20])
							 .range([0,100]);
						var result = scale(10);
						=》 50
				 */


				 /**
				  * 例子05
				  * 	如何添加坐标轴
				  *
				  * 	var dataset = [ 30 , 20 , 45 , 12 , 21 ];
						var xScale = d3.scale.linear()
											.domain([0,d3.max(dataset)])
											.range([0,500]);

						var axis = d3.svg.axis()  	//生成一个坐标轴的函数
										.scale(xScale)  	//指定坐标轴比例
										.orient("bottom"); 	//bottom 表示在坐标轴的下方显示

						完整代码：

								var width = 600;
								var height = 600;
								var dataset = [ 30 , 20 , 45 , 12 , 21 ];

								var svg = d3.select("body").append("svg")
														.attr("width",width)
														.attr("height",height);

								var xScale = d3.scale.linear()
													.domain([0,d3.max(dataset)])
													.range([0,500]);

								var axis = d3.svg.axis()
												.scale(xScale)
												.orient("bottom");

								svg.append("g")  		//svg 中添加一个g，g是 svg 中的一个属性，是 group 的意思，它表示一组什么东西
									.attr("class","axis")
									.attr("transform","translate(10,160)")
									.call(axis);  	//call 相当于定义一个函数，再把选择的元素给它

								svg.selectAll("rect")
								   .data(dataset)
								   .enter()
								   .append("rect")
								   .attr("x",10)
								   .attr("y",function(d,i){
										return i * 30;
								   })
								   .attr("width",xScale)           //注意这里
								   .attr("height",28)
								   .attr("fill","red");
				  *
				  */


				 /**
				  * 例子06
				  * 		实用的图表
				  *
				  * 			var width = 600;
								var height = 600;
								var dataset = [];
								var num = 15;  //数组的数量

								for(var i = 0; i < num ; i++){
									var tempnum = Math.floor( Math.random() * 50 );   // 返回 0~49 整数
									dataset.push(tempnum);
								}

								var svg = d3.select("body").append("svg")
														.attr("width",width)
														.attr("height",height);

								//坐标轴的 scale （比例）和坐标轴
								var xAxisScale = d3.scale.ordinal()
												.domain(d3.range(dataset.length))
												.rangeRoundBands([0,500]);

								var yAxisScale = d3.scale.linear()
												.domain([0,d3.max(dataset)])
												.range([500,0]);

								var xAxis = d3.svg.axis()
												.scale(xAxisScale)
												.orient("bottom");

								var yAxis = d3.svg.axis()
												.scale(yAxisScale)
												.orient("left");

								//柱形图的 scale
								var xScale = d3.scale.ordinal()
												.domain(d3.range(dataset.length))
												.rangeRoundBands([0,500],0.05);

								var yScale = d3.scale.linear()
												.domain([0,d3.max(dataset)])
												.range([0,500]);

								//绘制柱形图，注意 scale 的使用
								svg.selectAll("rect")
								   .data(dataset)
								   .enter()
								   .append("rect")
								   .attr("x", function(d,i){
										return 30 + xScale(i);
								   } )
								   .attr("y",function(d,i){
										return 50 + 500 - yScale(d) ;
								   })
								   .attr("width", function(d,i){
										return xScale.rangeBand();
								   })
								   .attr("height",yScale)
								   .attr("fill","red");

								//绘制文字标签，同样注意 scale
								svg.selectAll("text")
									.data(dataset)
									.enter().append("text")
									.attr("x", function(d,i){
										return 30 + xScale(i);
								   } )
								   .attr("y",function(d,i){
										return 50 + 500 - yScale(d) ;
								   })
									.attr("dx", function(d,i){
										return xScale.rangeBand()/3;
								   })
									.attr("dy", 15)
									.attr("text-anchor", "begin")
									.attr("font-size", 14)
									.attr("fill","white")
									.text(function(d,i){
										return d;
									});

								//绘制坐标轴
								svg.append("g")
									.attr("class","axis")
									.attr("transform","translate(30,550)")
									.call(xAxis);

								svg.append("g")
									.attr("class","axis")
									.attr("transform","translate(30,50)")
									.call(yAxis);
				  */


				  /**
				   * 例子07
				   * 		如何让图表动起来
				   *
				   * 		transition()
				   * 		 启动转变效果只需要添加这个即可。把它加到两种状态之间
				   * 		 .attr("fill","red")
							 .transition()
							 .attr("fill","steelblue")

							duration()
							指定整个转变持续多少时间

							ease('bounce')
							指定转变的方式 linear  circle  elastic  bounce

							delay()
							指定延迟的时间

							.delay(funtion(d,i){  //依次类推
								return 200*i;
							})

				   */

					/**
					 *例子08
					 *		update, enter, exit 的使用
					 *		1.	update()    当对应的元素正好满足时 （ 绑定数据数量 = 对应元素
					 *  	2. enter()    当对应的元素不足时 （ 绑定数据数量 > 对应元素 ）  enter 函数的使用最为多见
					 *  	3. exit()     当对应的元素过多时 （ 绑定数据数量 < 对应元素 ）
					 *
					 *
					 */


					 /**
					  * 例子09
					  * 	事件操作
					  * 	svg.selectAll("rect")
							   .data(dataset)
							   .enter()
							   .append("rect")
							   .attr("x", function(d,i){
									return 30 + xScale(i);
							   } )
							   .attr("y",function(d,i){
									return 50 + 500 - yScale(d) ;
							   })
							   .attr("width", function(d,i){
									return xScale.rangeBand();
							   })
							   .attr("height",yScale)
							   .attr("fill","red")
							   .on("click",function(d,i){
									d3.select(this)
									  .attr("fill","green");
							   })
							   .on("mouseover",function(d,i){
									d3.select(this)
									  .attr("fill","yellow");
							   })
							   .on("mouseout",function(d,i){
									d3.select(this)
									  .transition()
									  .duration(500)
									  .attr("fill","red");
							   });
					  */


					 /**
					  * 例子10
					  * 	常见可视化图形 ---
					  * 	 Layout 理解为“制作常见图形的函数”
					  * 	 Pie  饼状
					  * 	 Histogram	柱行
					  * 	 等等...
					  *
					  *
					  * 	 饼状图的制作：
					  * 	 	var dataset = [ 30 , 10 , 43 , 55 , 13 ];
					  *
					  * 	 	//将上面这样的数据转换成饼状图需要的角度
					  * 	 	var pie = d3.layout.pie();
					  *
					  * 		//width 是 svg 绘制框的宽度
					  * 		var outerRadius = width / 2;  //弧线外半径
								var innerRadius = width / 4;  //弧线内半径
								var arc = d3.svg.arc()
												.innerRadius(innerRadius)
												.outerRadius(outerRadius);

								var arcs = svg.selectAll("g")
								  .data(pie(dataset))  //绑定了转换后的数据 pie(dataset)
								  .enter()
								  .append("g")
								  .attr("transform","translate("+outerRadius+","+outerRadius+")");


							完整代码：
									var width = 600;
									var height = 600;
									var dataset = [ 30 , 10 , 43 , 55 , 13 ];

									var svg = d3.select("body").append("svg")
															.attr("width",width)
															.attr("height",height);

									var pie = d3.layout.pie();

									var outerRadius = width / 2;
									var innerRadius = width / 4;
									var arc = d3.svg.arc()
													.innerRadius(innerRadius)
													.outerRadius(outerRadius);

									var color = d3.scale.category10();

									//有5个数据，所以会添加5个g元素
									var arcs = svg.selectAll("g")
												  .data(pie(dataset))
												  .enter()
												  .append("g")
												  .attr("transform","translate("+outerRadius+","+outerRadius+")");
									 =>arcs 返回的是同时选择5个g元素的选择

									arcs.append("path")   //每一个 g 中都有 path
										.attr("fill",function(d,i){
											return color(i);  //添加颜色属性，和路径属性。
										})
										.attr("d",function(d){
											return arc(d);
										});

									//每一个弧线中心添加文本
									arcs.append("text")
										.attr("transform",function(d){
											return "translate(" + arc.centroid(d) + ")";
										})
										.attr("text-anchor","middle")
										.text(function(d){
											return d.value;
										});

									console.log(dataset);
									console.log(pie(dataset));
					  */


					  /**
					   * 例子11
					   * 	树状图
					   * 	完整代码：
					   *
					   * 		var width = 500,
								height = 500;

								var tree = d3.layout.tree()
									.size([width, height-200])
									.separation(function(a, b) { return (a.parent == b.parent ? 1 : 2) / a.depth; });

								var diagonal = d3.svg.diagonal()
									.projection(function(d) { return [d.y, d.x]; });

								var svg = d3.select("body").append("svg")
									.attr("width", width)
									.attr("height", height)
									.append("g")
									.attr("transform", "translate(40,0)");



								d3.json("city_tree.json", function(error, root) {

									var nodes = tree.nodes(root);
									var links = tree.links(nodes);

									console.log(nodes);
									console.log(links);

									var link = svg.selectAll(".link")
									  .data(links)
									  .enter()
									  .append("path")
									  .attr("class", "link")
									  .attr("d", diagonal);

									var node = svg.selectAll(".node")
									  .data(nodes)
									  .enter()
									  .append("g")
									  .attr("class", "node")
									  .attr("transform", function(d) { return "translate(" + d.y + "," + d.x + ")"; })

									node.append("circle")
									  .attr("r", 4.5);

									node.append("text")
									  .attr("dx", function(d) { return d.children ? -8 : 8; })
									  .attr("dy", 3)
									  .style("text-anchor", function(d) { return d.children ? "end" : "start"; })
									  .text(function(d) { return d.name; });
									});
					   */


						/**
						 * 例子12
						 * 		打包图
						 *
						 * 			var width  = 500;
									var height = 500;

									var pack = d3.layout.pack()
													.size([ width, height ])
													.radius(20);

									var svg = d3.select("body").append("svg")
										.attr("width", width)
										.attr("height", height)
										.append("g")
										.attr("transform", "translate(0,0)");


									d3.json("city2.json", function(error, root) {

										var nodes = pack.nodes(root);
										var links = pack.links(nodes);

										console.log(nodes);
										console.log(links);

										svg.selectAll("circle")
											.data(nodes)
											.enter()
											.append("circle")
											.attr("fill","rgb(31, 119, 180)")
											.attr("fill-opacity","0.4")
											.attr("cx",function(d){
												return d.x;
											})
											.attr("cy",function(d){
												return d.y;
											})
											.attr("r",function(d){
												return d.r;
											})
											.on("mouseover",function(d,i){
												d3.select(this)
													.attr("fill","yellow");
											})
											.on("mouseout",function(d,i){
												d3.select(this)
													.attr("fill","rgb(31, 119, 180)");
											});

										svg.selectAll("text")
													  .data(nodes)
													  .enter()
													  .append("text")
													  .attr("font-size","10px")
													  .attr("fill","white")
													  .attr("fill-opacity",function(d){
														  if(d.depth == 2)
															  return "0.9";
														  else
															  return "0";
													  })
													  .attr("x",function(d){ return d.x; })
													  .attr("y",function(d){ return d.y; })
													  .attr("dx",-12)
													  .attr("dy",1)
													  .text(function(d){ return d.name; });

									});
						 */


						 /**
						  * 例子13
						  * 	圆形分区图
						  * 		var width = 450,
										height = 450,
										radius =  Math.min(width, height) / 2 ,
										color = d3.scale.category20();

									var svg = d3.select("body").append("svg")
												.attr("width", width)
												.attr("height", height)
												.append("g")
												.attr("transform", "translate(" + radius + "," + radius + ")");

									var partition = d3.layout.partition()
													.sort(null)
													.size([2 * Math.PI, radius * radius])
													.value(function(d) { return 1; });

									var arc = d3.svg.arc()
												.startAngle(function(d) { return d.x; })
												.endAngle(function(d) { return d.x + d.dx; })
												.innerRadius(function(d) { return Math.sqrt(d.y); })
												.outerRadius(function(d) { return Math.sqrt(d.y + d.dy); });


									d3.json("city_tree.json", function(error, root) {

										if(error)
											console.log(error);
										console.log(root);

										var nodes = partition.nodes(root);
										var links = partition.links(nodes);

										console.log(nodes);

										var arcs = svg.selectAll("g")
													  .data(nodes)
													  .enter().append("g");

										arcs.append("path")
											.attr("display", function(d) { return d.depth ? null : "none"; }) // hide inner ring
											.attr("d", arc)
											.style("stroke", "#fff")
											.style("fill", function(d) { return color((d.children ? d : d.parent).name); })
											.on("mouseover",function(d){
												d3.select(this)
													.style("fill","yellow");
											})
											.on("mouseout",function(d){
												d3.select(this)
													.transition()
													.duration(200)
													.style("fill", function(d) {
														return color((d.children ? d : d.parent).name);
													});
											});


										arcs.append("text")
											.style("font-size", "12px")
											.style("font-family", "simsun")
											.attr("text-anchor","middle")
											.attr("transform",function(d,i){
													//第一个元素（最中间的），只平移不旋转
													if( i == 0 )
														return "translate(" + arc.centroid(d) + ")";

													//其他的元素，既平移也旋转
													var r = 0;
													if( (d.x+d.dx/2)/Math.PI*180 < 180 )  // 0 - 180 度以内的
														r = 180 * ((d.x + d.dx / 2 - Math.PI / 2) / Math.PI);
													else  // 180 - 360 度以内的
														r = 180 * ((d.x + d.dx / 2 + Math.PI / 2) / Math.PI);

													//既平移也旋转
													return  "translate(" + arc.centroid(d) + ")" +
															"rotate(" + r + ")";
											})
											.text(function(d) { return d.name; });

									});
						  */


						 /**
						  *图形库的流行程度
						  *
						  *	结果如下，D3.js 和 Three.js 是最受欢迎的两个，Three.js 是用于制作三维图形的库。Processing.js 与 EaselJS 与前两个相差较多。ECharts 是百度开发的可视化库，非常优秀，是国人的骄傲，可能因为统计的是谷歌上的搜索词的原因，热度不高。
						  *
						  */
				</code>
			</pre>
	</div>
		<!-- <div class="col-md-4">
			<pre style="margin-bottom: 10px; background: hsl(30, 20%, 25%); ">
				<code class="language-css" style="color:#fff; font-size:15px; text-shadow: none;">
	代码说明：

	

	
				</code>
			</pre>
		</div> -->

		<button class="btn pull-right"  ui-sref="index" style="background: hsl(30, 20%, 25%); color:#fff;margin-bottom:10px; margin-right: 15px;">返回</button>
	</div>
	
	
</div>
	

